$(function(){function s(){$("input[name='message']").focus(),$(".messages-list").scrollTop($(".messages-list")[0].scrollHeight)}$("#send").submit(function(){return $.ajax({url:"/messages/send-message/",data:$("#send").serialize(),cache:!1,type:"POST",success:function(e){$(".send-message").before(e),$("input[name='message']").val(""),s()}}),!1});var e=("https:"===window.location.protocol?"wss":"ws")+"://"+window.location.host+"/ws/"+currentUser+"/";const n=new ReconnectingWebSocket(e);n.onmessage=function(e){e=JSON.parse(e.data);e.sender===activeUser&&($(".send-message").before(e.message),s())}});
